<!-- /miniprogram/pages/index/index.wxml -->
<!-- 说明：小程序首页，包含画布、信息栏以及操作按钮，新增重置进度与清空最佳分功能。 -->

<view class="wrap">
  <!-- 标题 -->
  <view class="row">
    <text class="title">Stage2048（关卡 2048）</text>
  </view>

  <!-- 画布：同时设置 CSS 尺寸与实际像素宽高，绑定触摸事件用于识别滑动方向 -->
  <canvas
    id="game"
    canvas-id="game"
    style="width: {{canvasPx}}px; height: {{canvasPx}}px;"
    width="{{canvasPx}}"
    height="{{canvasPx}}"
    bindtouchstart="onTouchStart"
    bindtouchend="onTouchEnd"
  ></canvas>

  <!-- 信息栏：关卡+目标 -->
  <view class="row">
    <text class="meta">关卡 {{level}}（{{size}}×{{size}}）</text>
    <text class="meta">目标 {{target}}</text>
  </view>

  <!-- 信息栏：得分/总分/最佳 -->
  <view class="row">
    <text class="score">得分 {{score}}</text>
    <text class="score">总分 {{totalScore}}</text>
    <text class="score">最佳 {{bestScore}}</text>
  </view>

  <!-- 操作区：重开本关 / 重置进度 / 清空最佳分 -->
  <view class="row">
    <button class="btn" bindtap="onRestart">重开本关</button>
    <button class="btn" bindtap="onResetProgress">重置进度</button>
    <button class="btn" bindtap="onClearBest">清空最佳分</button>
  </view>
</view>
