# Web 版本说明（含 Canvas 渲染、设置面板与持久化）

> 本文件逐行使用中文描述，介绍如何在浏览器端运行 2048 关卡版，并说明设置面板、URL 覆盖以及导入/导出流程。

## 打开方法
1. 直接双击 `index.html` 或使用本地静态服务器访问 `web/index.html`，即可在浏览器中体验关卡模式。
2. 游戏支持键盘方向键与触摸滑动操作，桌面端与移动端均可完成数字合并。
3. 页面会自动读取本地存储中的设置与进度，刷新后仍可从上次关卡继续。

## 设置面板
- 画布下方新增“设置与持久化”面板，可调整画布尺寸、格子间隙、起始尺寸、是否累计总分以及目标函数（`power` 或示例 `fibonacci`）。
- 修改任意字段会立即写入 `localStorage`，并基于新配置重新初始化关卡。
- 面板底部提供“导出设置/进度（JSON）”与“导入设置/进度（选择文件）”按钮，可用于备份或迁移数据。

## URL 覆盖
- 地址栏追加查询参数即可覆盖本地存储中的配置，例如：`index.html?size=3&gap=8&targetFnKey=power`。
- 优先级为：URL Query → 本地存储 → 默认配置。

## 导入 / 导出流程
1. 点击“导出设置/进度（JSON）”会生成包含 `{ settings, progress, bestScore }` 的文本文件。
2. 点击“导入设置/进度（选择文件）”并选择上述文件，可恢复设置、关卡进度与最佳分。
3. 导入成功后会覆盖本地存储，并自动重绘当前棋盘。

## 重置与清空
- “重置进度”按钮会删除本地存档，并按当前设置重新开始游戏。
- “清空最佳分”按钮会清除历史最佳成绩，并立即刷新 HUD。

## 故障排查
- 若发现画布模糊，请检查系统缩放比例与设备像素比；窗口大小变化时脚本会自动重算画布尺寸。
- 若导入失败，请确认 JSON 结构与示例一致，并检查浏览器控制台输出的报错信息。
